version: "3.0"
stories:
- story: test order conv - 1 (tests/test_suppl_order_1.yml)
  steps:
  - intent: greet
  - action: action_utter_greet
  - intent: ask_find_supplier
  - action: action_reset_all_slots
  - action: utter_ready
  - action: find_supplier_form
  - active_loop: find_supplier_form
  - slot_was_set:
    - supplier: fior di loto
  - active_loop: null
  - action: utter_ask_what
  - intent: inform_need_order
  - action: utter_ready_to_order
  - action: action_get_ordlist
  - slot_was_set:
    - ord_code: 20220808192211
  - slot_was_set:
    - ord_date: null
  - slot_was_set:
    - ord_list: null
  - slot_was_set:
    - new_list: true
  - action: utter_ask_suggest_ord
  - intent: affirm
  - slot_was_set:
    - affirmed: true
  - action: action_get_suggestion_list
  - slot_was_set:
    - found: false
  - action: action_reset_form_slots
  - slot_was_set:
    - p_code: null
  - slot_was_set:
    - pieces: null
  - slot_was_set:
    - keep: null
  - slot_was_set:
    - add_sugg: null
  - slot_was_set:
    - variation: null
  - action: utter_ask_write
  - intent: affirm
  - action: utter_guidance_write
  - action: write_order_form
  - active_loop: write_order_form
  - slot_was_set:
    - p_code: '8016323045088'
  - slot_was_set:
    - matches: null
  - slot_was_set:
    - supplier: fior di loto
  - slot_was_set:
    - p_name: frollini di riso con nocciole bio 200 grammi
  - slot_was_set:
    - cur_quantity: '8'
  - slot_was_set:
    - category: alimentazione
  - slot_was_set:
    - price: '4.0'
  - slot_was_set:
    - discount: '35'
  - slot_was_set:
    - vat: '10'
  - slot_was_set:
    - cost: '2.8600000000000003'
  - slot_was_set:
    - tot_cost: '22.880000000000003'
  - slot_was_set:
    - tot_value: '32.0'
  - slot_was_set:
    - dispmedico: 'false'
  - slot_was_set:
    - vegan: 'true'
  - slot_was_set:
    - no_lactose: 'true'
  - slot_was_set:
    - no_gluten: 'true'
  - slot_was_set:
    - no_sugar: 'false'
  - slot_was_set:
    - pieces: 5
  - slot_was_set:
    - fail: null
  - slot_was_set:
    - p_code: '8016323016170'
  - slot_was_set:
    - matches: null
  - slot_was_set:
    - supplier: fior di loto
  - slot_was_set:
    - p_name: stelline di grano saraceno bio 250 grammi
  - slot_was_set:
    - cur_quantity: '12'
  - slot_was_set:
    - category: alimentazione
  - slot_was_set:
    - price: '2.3'
  - slot_was_set:
    - discount: '35'
  - slot_was_set:
    - vat: '10'
  - slot_was_set:
    - cost: '1.6444999999999999'
  - slot_was_set:
    - tot_cost: '19.733999999999998'
  - slot_was_set:
    - tot_value: '27.6'
  - slot_was_set:
    - dispmedico: 'false'
  - slot_was_set:
    - vegan: 'false'
  - slot_was_set:
    - no_lactose: 'false'
  - slot_was_set:
    - no_gluten: 'true'
  - slot_was_set:
    - no_sugar: 'false'
  - slot_was_set:
    - pieces: 3
  - slot_was_set:
    - fail: null
  - active_loop: null
  - action: utter_done  # predicted: action_listen
  - action: utter_order_ready
  - action: action_utter_tot_ordcost
  - action: utter_ask_definitive
  - intent: affirm
  - slot_was_set:
    - affirmed: true
  - action: action_mark_definitive
  - action: utter_available
  - action: action_reset_all_slots
  - slot_was_set:
    - fail: null
  - slot_was_set:
    - pending_delivery: null
  - slot_was_set:
    - p_code: null
  - slot_was_set:
    - supplier: null
  - slot_was_set:
    - p_name: null
  - slot_was_set:
    - matches: null
  - slot_was_set:
    - variation: null
  - slot_was_set:
    - pieces: null
  - slot_was_set:
    - affirmed: null
  - slot_was_set:
    - new_list: null
  - slot_was_set:
    - ord_code: null
  - slot_was_set:
    - ord_date: null
  - slot_was_set:
    - ord_list: null
  - slot_was_set:
    - closed_code: null
  - slot_was_set:
    - closed_list: null
  - slot_was_set:
    - keep: null
  - slot_was_set:
    - cur_quantity: null
  - slot_was_set:
    - found: null
  - slot_was_set:
    - add_sugg: null
  - slot_was_set:
    - category: null
  - slot_was_set:
    - price: null
  - slot_was_set:
    - discount: null
  - slot_was_set:
    - vat: null
  - slot_was_set:
    - cost: null
  - slot_was_set:
    - tot_cost: null
  - slot_was_set:
    - tot_value: null
  - slot_was_set:
    - dispmedico: null
  - slot_was_set:
    - vegan: null
  - slot_was_set:
    - no_lactose: null
  - slot_was_set:
    - no_gluten: null
  - slot_was_set:
    - no_sugar: null
  - slot_was_set:
    - requested_slot: null
- story: test order conv - 2 (tests/test_suppl_order_2.yml)
  steps:
  - intent: ask_find_supplier
  - action: action_reset_all_slots
  - action: utter_ready
  - action: find_supplier_form
  - active_loop: find_supplier_form
  - slot_was_set:
    - supplier: fior di loto
  - active_loop: null
  - action: utter_ask_what
  - intent: ask_latest_list
  - action: action_get_ordlist
  - slot_was_set:
    - ord_code: 20220808192211
  - slot_was_set:
    - ord_date: '2022-08-08'
  - slot_was_set:
    - ord_list: '{"codiceprod": {"0": 8016323045088, "1": 8016323016170}, "nome": {"0": "frollini di riso con nocciole bio 200 grammi", "1": "stelline di grano saraceno bio 250 grammi"}, "quantita": {"0": 5, "1": 3}, "giacenza": {"0": 8, "1": 12}}'
  - slot_was_set:
    - new_list: false
  - action: utter_ask_read
  - intent: affirm
  - slot_was_set:
    - affirmed: true
  - action: action_reset_form_slots
  - slot_was_set:
    - p_code: null
  - slot_was_set:
    - pieces: null
  - slot_was_set:
    - keep: null
  - slot_was_set:
    - add_sugg: null
  - slot_was_set:
    - variation: null
  - action: utter_guidance_read
  - action: read_order_form
  - active_loop: read_order_form
  - slot_was_set:
    - affirmed: true
  - slot_was_set:
    - keep: true
  - slot_was_set:
    - affirmed: false
  - slot_was_set:
    - keep: false
  - active_loop: null
  - action: utter_ask_suggest_ord
  - intent: affirm
  - slot_was_set:
    - affirmed: true
  - action: action_get_suggestion_list
  - slot_was_set:
    - found: false
  - action: action_reset_form_slots
  - slot_was_set:
    - p_code: null
  - slot_was_set:
    - pieces: null
  - slot_was_set:
    - keep: null
  - slot_was_set:
    - add_sugg: null
  - slot_was_set:
    - variation: null
  - action: utter_ask_write
  - intent: affirm
  - action: utter_guidance_write
  - action: write_order_form
  - active_loop: write_order_form
  - slot_was_set:
    - p_code: '8016323036284'
  - slot_was_set:
    - matches: null
  - slot_was_set:
    - supplier: fior di loto
  - slot_was_set:
    - p_name: quinoa bianca bio
  - slot_was_set:
    - cur_quantity: '12'
  - slot_was_set:
    - category: alimentazione
  - slot_was_set:
    - price: '4.8'
  - slot_was_set:
    - discount: '35'
  - slot_was_set:
    - vat: '10'
  - slot_was_set:
    - cost: '3.4320000000000004'
  - slot_was_set:
    - tot_cost: '41.184000000000005'
  - slot_was_set:
    - tot_value: '57.6'
  - slot_was_set:
    - dispmedico: 'false'
  - slot_was_set:
    - vegan: 'true'
  - slot_was_set:
    - no_lactose: 'true'
  - slot_was_set:
    - no_gluten: 'true'
  - slot_was_set:
    - no_sugar: 'true'
  - slot_was_set:
    - pieces: 2
  - slot_was_set:
    - fail: null
  - active_loop: null
  - action: utter_done  # predicted: action_listen
  - action: utter_order_ready
  - action: action_utter_tot_ordcost
  - action: utter_ask_definitive
  - intent: deny
  - slot_was_set:
    - affirmed: false
  - action: utter_ok
  - action: utter_ask_more
  - intent: ask_get_view_ord
  - action: action_send_view
  - action: utter_ask_more
  - intent: ask_tot_ordcost
  - action: action_utter_tot_ordcost
  - action: utter_ask_more
  - intent: ask_make_definitive
  - action: utter_ask_definitive
  - intent: affirm
  - slot_was_set:
    - affirmed: true
  - action: action_mark_definitive
  - action: utter_available
  - action: action_reset_all_slots
  - slot_was_set:
    - fail: null
  - slot_was_set:
    - pending_delivery: null
  - slot_was_set:
    - p_code: null
  - slot_was_set:
    - supplier: null
  - slot_was_set:
    - p_name: null
  - slot_was_set:
    - matches: null
  - slot_was_set:
    - variation: null
  - slot_was_set:
    - pieces: null
  - slot_was_set:
    - affirmed: null
  - slot_was_set:
    - new_list: null
  - slot_was_set:
    - ord_code: null
  - slot_was_set:
    - ord_date: null
  - slot_was_set:
    - ord_list: null
  - slot_was_set:
    - closed_code: null
  - slot_was_set:
    - closed_list: null
  - slot_was_set:
    - keep: null
  - slot_was_set:
    - cur_quantity: null
  - slot_was_set:
    - found: null
  - slot_was_set:
    - add_sugg: null
  - slot_was_set:
    - category: null
  - slot_was_set:
    - price: null
  - slot_was_set:
    - discount: null
  - slot_was_set:
    - vat: null
  - slot_was_set:
    - cost: null
  - slot_was_set:
    - tot_cost: null
  - slot_was_set:
    - tot_value: null
  - slot_was_set:
    - dispmedico: null
  - slot_was_set:
    - vegan: null
  - slot_was_set:
    - no_lactose: null
  - slot_was_set:
    - no_gluten: null
  - slot_was_set:
    - no_sugar: null
  - slot_was_set:
    - requested_slot: null
- story: test warehouse conv - 1 (tests/test_warehouse_1.yml)
  steps:
  - intent: greet
  - action: action_utter_greet
  - intent: ask_get_view
  - action: action_send_view
  - action: utter_ask_more  # predicted: action_default_fallback
  - intent: deny
  - action: utter_available  # predicted: utter_ok
  - action: action_listen  # predicted: action_reset_all_slots
- story: test warehouse conv - 3 (tests/test_warehouse_2.yml)
  steps:
  - intent: ask_variations
  - action: action_reset_all_slots
  - action: action_proactive_check
  - slot_was_set:
    - pending_delivery: null
  - action: utter_guidance_vars
  - action: variations_form
  - active_loop: variations_form
  - slot_was_set:
    - p_code: '8017977000492'
  - slot_was_set:
    - matches: null
  - slot_was_set:
    - supplier: la finestra sul cielo
  - slot_was_set:
    - p_name: semi di zucca decorticati bio 150 grammi
  - slot_was_set:
    - cur_quantity: '2'
  - slot_was_set:
    - category: alimentazione
  - slot_was_set:
    - price: '3.7'
  - slot_was_set:
    - discount: '35'
  - slot_was_set:
    - vat: '10'
  - slot_was_set:
    - cost: '2.6455'
  - slot_was_set:
    - tot_cost: '5.291'
  - slot_was_set:
    - tot_value: '7.4'
  - slot_was_set:
    - dispmedico: 'false'
  - slot_was_set:
    - vegan: 'true'
  - slot_was_set:
    - no_lactose: 'true'
  - slot_was_set:
    - no_gluten: 'false'
  - slot_was_set:
    - no_sugar: 'true'
  - slot_was_set:
    - variation: decrease
  - slot_was_set:
    - pieces: 2
  - slot_was_set:
    - p_code: null
  - slot_was_set:
    - supplier: null
  - slot_was_set:
    - p_name: null
  - slot_was_set:
    - p_code: '8016323036284'
  - slot_was_set:
    - matches: null
  - slot_was_set:
    - variation: null
  - slot_was_set:
    - pieces: null
  - slot_was_set:
    - supplier: fior di loto
  - slot_was_set:
    - p_name: quinoa bianca bio
  - slot_was_set:
    - cur_quantity: '9'
  - slot_was_set:
    - category: alimentazione
  - slot_was_set:
    - price: '4.8'
  - slot_was_set:
    - discount: '35'
  - slot_was_set:
    - vat: '10'
  - slot_was_set:
    - cost: '3.4320000000000004'
  - slot_was_set:
    - tot_cost: '30.888000000000005'
  - slot_was_set:
    - tot_value: '43.2'
  - slot_was_set:
    - dispmedico: 'false'
  - slot_was_set:
    - vegan: 'true'
  - slot_was_set:
    - no_lactose: 'true'
  - slot_was_set:
    - no_gluten: 'true'
  - slot_was_set:
    - no_sugar: 'true'
  - slot_was_set:
    - variation: add
  - slot_was_set:
    - pieces: 3
  - slot_was_set:
    - p_code: null
  - slot_was_set:
    - supplier: null
  - slot_was_set:
    - p_name: null
  - active_loop: null
  - action: action_reset_all_slots  # predicted: utter_available
  - slot_was_set:
    - fail: null
  - slot_was_set:
    - pending_delivery: null
  - slot_was_set:
    - p_code: null
  - slot_was_set:
    - supplier: null
  - slot_was_set:
    - p_name: null
  - slot_was_set:
    - matches: null
  - slot_was_set:
    - variation: null
  - slot_was_set:
    - pieces: null
  - slot_was_set:
    - affirmed: null
  - slot_was_set:
    - new_list: null
  - slot_was_set:
    - ord_code: null
  - slot_was_set:
    - ord_date: null
  - slot_was_set:
    - ord_list: null
  - slot_was_set:
    - closed_code: null
  - slot_was_set:
    - closed_list: null
  - slot_was_set:
    - keep: null
  - slot_was_set:
    - cur_quantity: null
  - slot_was_set:
    - found: null
  - slot_was_set:
    - add_sugg: null
  - slot_was_set:
    - category: null
  - slot_was_set:
    - price: null
  - slot_was_set:
    - discount: null
  - slot_was_set:
    - vat: null
  - slot_was_set:
    - cost: null
  - slot_was_set:
    - tot_cost: null
  - slot_was_set:
    - tot_value: null
  - slot_was_set:
    - dispmedico: null
  - slot_was_set:
    - vegan: null
  - slot_was_set:
    - no_lactose: null
  - slot_was_set:
    - no_gluten: null
  - slot_was_set:
    - no_sugar: null
  - slot_was_set:
    - requested_slot: null
  - action: utter_done  # predicted: utter_available
  - action: utter_available  # predicted: utter_order_ready
  - intent: thanks
  - action: utter_welcome
