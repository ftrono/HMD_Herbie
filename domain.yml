version: "2.0"

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true


#USER INTENTS:
intents:
  - greet
  - stop
  - thanks
  - affirm
  - deny
  - bot_challenge
  #product info:
  - inform_p_code
  - inform_p_text
  - ask_azienda
  #inventory & orders:
  - ask_giacenza
  - ask_mark_to_order
  #warehouse:
  - ask_wh_upd
  - inform_add_pieces
  - inform_decr_pieces
  - next
  - more
  - ask_pieces


#ENTITIES:
entities:
  - p_code
  - p_name
  - supplier
  - variation
  - pieces
  - next
  - more
  - price
  - discount
  - vat
  - shelf


#SLOTS:
slots:
  #product identification:
  p_code:
    type: float
    influence_conversation: False
    min_value: 0.0
    #max_value: 
    #initial_value: null
    #auto_fill: True
  
  p_name:
    type: text
    influence_conversation: False

  supplier:
    type: text
    influence_conversation: False

  p_text:
    type: text
    influence_conversation: False

  #warehouse:
  variation:
    type: text
    influence_conversation: False
    # mappings:
    # - type: custom
    
  pieces:
    type: float
    influence_conversation: False
    min_value: 0
    max_value: 100

  mark_to_order:
    type: bool
    influence_conversation: False

  next:
    type: bool
    influence_conversation: False

  more:
    type: bool
    influence_conversation: False


#AGENT'S RESPONSES:
responses:
  utter_greet:
  - text: "Ciao!"
  - text: "Ciao a te!"
  #- text: "Hey, {name}! How is your day going?"
  #can add more alternative responses (one will be selected randomly).

  utter_happy:
  - text: "Ottimo! Buon lavoro."

  utter_welcome:
  - text: "Di nulla!"
  - text: "Nulla!"
  - text: "Figurati!"
  - text: "Ma di nulla!"
  - text: "Ma figurati!"

  utter_available:
  - text: "Se ti serve altro mi trovi qui quando vuoi!"
  - text: "Se ti serve altro mi trovi qui."
  - text: "Resto a disposizione!"
  - text: "Chiamami pure quando vuoi!"
  - text: "Alla prossima!"

  utter_ready:
    - text: "Sono pronto!"
    - text: "Certo!"
    - text: "Subito!"
    - text: "Certamente!"
    - text: "Va benissimo!"

  utter_ok:
  - text: "Ok!"
  - text: "Perfetto!"
  - text: "Ricevuto!"
  - text: "Va benissimo!"

  utter_iamabot:
  - text: "Sono Herbie, il tuo shop manager digitale. Sono qui per aiutarti!"

  utter_done:
  - text: "Missione compiuta!"
  - text: "Fatto!"
  - text: "Fatto! Tutto settato."

#product info:
  utter_ask_p_text:
  - text: "Dimmi il prodotto!"
  - text: "Dimmi pure il prodotto!"
  - text: "Vai col prodotto!"

  utter_wrong_p_text:
  - text: "Mi ripeteresti il nome?"

#warehouse:
  utter_ask_variation:
  - text: "Mi dici la variazione dei pezzi?"
  - text: "Variazione?"

  utter_ask_next:
  - text: "Continuiamo?"

  utter_ask_more:
  - text: "Cosa vuoi che faccia?"
  - text: "Cosa ti può servire?"
  - text: "Ti può servire qualcosa?"

  utter_ask_mark_to_order:
  - text: "Vuoi che te lo segni come da ordinare?"
  - text: "Lo includo nel prossimo ordine?"
  - text: "Te lo metto in lista per il prossimo ordine?"

#extra:
  utter_ask_price:
  - text: "Mi dici il prezzo al pubblico?"
  - text: "Ok! Prezzo di vendita?"
  - text: "Ricevuto! Qual è il prezzo al dettaglio?"

  utter_ask_discount:
  - text: "Qual è lo sconto medio su questo prodotto e fornitore?"
  - text: "Mi dici la scontistica media applicata dal fornitore?"
  - text: "Qual è la scontistica media del fornitore?"

  utter_ask_vat:
  - text: "Mi dai l'aliquota IVA?"
  - text: "Ok! Mi dici l'aliquota IVA?"
  - text: "A quale aliquota IVA mappo il prodotto?"

  utter_ask_shelf:
  - text: "Su quale scaffale stai piazzando questo prodotto?"
  - text: "Mi dici lo scaffale?"
  - text: "Ok! Mi dai il riferimento dello scaffale?"

  utter_recap:
  - text: "Ok, ricapitolando: ti sto aggiungendo {variation} pezzi di {p_name} di {supplier} al magazzino, mappati sullo scaffale {shelf}. Il prezzo di questi prodotti è {price} euro ognuno, li hai acquistati al {discount}% di sconto e si applicherà l'aliquota IVA al {vat}%."


#AGENT'S CUSTOM ACTIONS:
actions:
  - action_restart_magazzino_form
  - action_reset_all_slots
  - validate_magazzino_form
  - validate_giacenza_form


#FORMS:
forms:
  magazzino_form:
    required_slots:
      p_text:
        - type: from_text
          entity: p_text
      variation:
        - type: from_text
          entity: variation
      next:
        - type: from_text
          entity: next

  giacenza_form:
    required_slots:
      p_text:
        - type: from_text
          entity: p_text
      mark_to_order:
        - type: from_text
          entity: mark_to_order

