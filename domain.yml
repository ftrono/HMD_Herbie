version: "2.0"

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true


#USER INTENTS:
intents:
  - greet
  - stop
  - goodbye
  - affirm
  - deny
  - bot_challenge
  - thanks
  - ask_azienda
  #magazzino:
  - ask_wh_upd
  - inform_prod
  - inform_price
  - inform_quantity
  - inform_discount
  - inform_vat
  - inform_shelf


#ENTITIES:
entities:
  - p_code
  - p_name
  - supplier
  - quantity
  - price
  - discount
  - vat
  - shelf


#SLOTS:
slots:
  #product identification:
  p_code:
    type: float
    influence_conversation: False
    min_value: 0.0
    #max_value: 
    #initial_value: null
    #auto_fill: True
  
  p_name:
    type: text
    influence_conversation: False

  supplier:
    type: text
    influence_conversation: False

  p_text:
    type: text
    influence_conversation: False

  clarify_p_code:
    type: bool
    influence_conversation: False

  #warehouse data:
  quantity:
    type: float
    influence_conversation: False
    min_value: -100.0
    max_value: 100.0

  price:
    type: float
    influence_conversation: False
    min_value: 0.0

  discount:
    type: float
    influence_conversation: False
    min_value: 0.0
    max_value: 100.0

  vat:
    type: float
    influence_conversation: False
    min_value: 0.0
    max_value: 100.0

  shelf:
    type: text
    influence_conversation: False


#AGENT'S RESPONSES:
responses:
  utter_greet:
  - text: "Ciao!"
  #- text: "Hey, {name}! How is your day going?"
  #can add more alternative responses (one will be selected randomly).

  utter_happy:
  - text: "Ottimo! Buon lavoro."

  utter_welcome:
  - text: "Di nulla!"
  - text: "Nulla! Se ti serve altro mi trovi qui."

  utter_ok:
  - text: "Certo!"
  - text: "Ok!"
  - text: "Certamente!"
  - text: "Sono pronto!"

  utter_iamabot:
  - text: "Sono Herbie, il tuo shop manager digitale. Sono qui per aiutarti!"

  utter_done:
  - text: "Missione compiuta!"
  - text: "Lavoro completato! Chiamami pure se ti serve altro."
  - text: "Fatto! Tutto settato."

  utter_ask_p_text:
  - text: "Mi serve sapere il nome del prodotto e il produttore, oppure il suo codice a barre!"
  - text: "Puoi leggermi il codice a barre, oppure dirmi il nome del prodotto e il produttore."
  - text: "Mi leggeresti il codice a barre, oppure il nome del prodotto e il produttore?"

  utter_wrong_p_text:
  - text: "Mi ripeteresti il nome?"

  utter_ask_quantity:
  - text: "Mi dici il numero di pezzi da aggiungere?"
  - text: "Quanti pezzi aggiungo?"

  utter_ask_price:
  - text: "Mi dici il prezzo al pubblico?"
  - text: "Ok! Prezzo di vendita?"
  - text: "Ricevuto! Qual è il prezzo al dettaglio?"

  utter_ask_discount:
  - text: "Qual è lo sconto medio su questo prodotto e fornitore?"
  - text: "Mi dici la scontistica media applicata dal fornitore?"
  - text: "Qual è la scontistica media del fornitore?"

  utter_ask_vat:
  - text: "Mi dai l'aliquota IVA?"
  - text: "Ok! Mi dici l'aliquota IVA?"
  - text: "A quale aliquota IVA mappo il prodotto?"

  utter_ask_shelf:
  - text: "Su quale scaffale stai piazzando questo prodotto?"
  - text: "Mi dici lo scaffale?"
  - text: "Ok! Mi dai il riferimento dello scaffale?"

  utter_recap:
  - text: "Ok, ricapitolando: ti sto aggiungendo {quantity} pezzi di {p_code} al magazzino, mappati sullo scaffale {shelf}. Il prezzo di questi prodotti è {price} euro ognuno, li hai acquistati al {discount}% di sconto e si applicherà l'aliquota IVA al {vat}%."


#AGENT'S CUSTOM ACTIONS:
actions:
  - validate_magazzino_form
  #- validate_entity #custom action for data validation


#FORMS:
forms:
  magazzino_form:
    required_slots:
      p_text:
        - type: from_text
          entity: p_text
      quantity:
        - type: from_entity
          entity: quantity
      price:
        - type: from_entity
          entity: price
      discount:
        - type: from_entity
          entity: discount
      vat:
        - type: from_entity
          entity: vat
      shelf:
        - type: from_entity
          entity: shelf
    #ignored_intents: ...


